(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{9614:function(e,r,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/chat/[threadId]",function(){return a(8706)}])},5658:function(e,r,a){"use strict";var t=a(5893);a(7294);var s=a(512);r.Z=e=>{let{src:r,alt:a,size:n="base",fallback:i,className:l,...o}=e;return(0,t.jsxs)("div",{className:(0,s.Z)("\n    inline-flex items-center justify-center rounded-[var(--radius-full)] \n    bg-[var(--color-neutral-200)] text-[var(--color-neutral-600)] font-medium\n    overflow-hidden\n  ",{xs:"h-6 w-6 text-[var(--font-size-xs)]",sm:"h-8 w-8 text-[var(--font-size-sm)]",base:"h-12 w-12 text-[var(--font-size-base)]",lg:"h-16 w-16 text-[var(--font-size-lg)]",xl:"h-20 w-20 text-[var(--font-size-xl)]","2xl":"h-24 w-24 text-[var(--font-size-2xl)]"}[n],l),...o,children:[r?(0,t.jsx)("img",{src:r,alt:a||"Avatar",className:"h-full w-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,t.jsx)("span",{className:(0,s.Z)("flex items-center justify-center h-full w-full",r?"hidden":"flex"),children:i||(a?a.split(" ").map(e=>e.charAt(0)).join("").toUpperCase().slice(0,2):"?")})]})}},9976:function(e,r,a){"use strict";var t=a(5893),s=a(7294),n=a(512);let i=s.forwardRef((e,r)=>{let{children:a,variant:s="primary",size:i="base",disabled:l=!1,loading:o=!1,className:c,...d}=e;return(0,t.jsxs)("button",{ref:r,disabled:l||o,className:(0,n.Z)("\n    inline-flex items-center justify-center font-medium transition-all duration-[var(--duration-fast)]\n    focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--color-primary-500)] focus-visible:ring-offset-2\n    disabled:opacity-50 disabled:cursor-not-allowed\n  ",{primary:"\n      bg-[var(--color-primary-600)] text-white\n      hover:bg-[var(--color-primary-700)] hover:shadow-md hover:scale-[1.02]\n      active:bg-[var(--color-primary-800)] active:scale-[0.98]\n    ",secondary:"\n      bg-[var(--color-neutral-100)] text-[var(--color-neutral-900)] border border-[var(--color-neutral-300)]\n      hover:bg-[var(--color-neutral-200)] hover:shadow-sm hover:scale-[1.02]\n      active:bg-[var(--color-neutral-300)] active:scale-[0.98]\n    ",ghost:"\n      bg-transparent text-[var(--color-primary-600)]\n      hover:bg-[var(--color-primary-50)] hover:text-[var(--color-primary-700)]\n      active:bg-[var(--color-primary-100)]\n    ",gradient:"\n      bg-gradient-to-r from-[var(--color-primary-600)] to-[var(--color-secondary-600)] text-white\n      hover:shadow-lg hover:scale-[1.02]\n      active:scale-[0.98]\n    "}[s],{sm:"px-[var(--spacing-3)] py-[var(--spacing-2)] text-[var(--font-size-sm)] rounded-[var(--radius-sm)]",base:"px-[var(--spacing-4)] py-[var(--spacing-3)] text-[var(--font-size-base)] rounded-[var(--radius-base)]",lg:"px-[var(--spacing-6)] py-[var(--spacing-4)] text-[var(--font-size-lg)] rounded-[var(--radius-md)]"}[i],c),...d,children:[o&&(0,t.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a]})});i.displayName="Button",r.Z=i},2489:function(e,r,a){"use strict";var t=a(5893);a(7294);var s=a(512);r.Z=e=>{let{children:r,variant:a="default",padding:n="base",hover:i=!1,className:l,...o}=e,c={default:"shadow-[var(--shadow-sm)]",elevated:"shadow-[var(--shadow-md)]",interactive:"\n      shadow-[var(--shadow-sm)] cursor-pointer\n      hover:shadow-[var(--shadow-md)] hover:scale-[1.02] hover:-translate-y-1\n    "},d=i?c.interactive:c[a];return(0,t.jsx)("div",{className:(0,s.Z)("\n    bg-white rounded-[var(--radius-lg)] border border-[var(--color-neutral-200)]\n    transition-all duration-[var(--duration-fast)]\n  ",d,{none:"",sm:"p-[var(--spacing-4)]",base:"p-[var(--spacing-6)]",lg:"p-[var(--spacing-8)]"}[n],l),...o,children:r})}},4562:function(e,r,a){"use strict";var t=a(5893),s=a(7294),n=a(512);let i=s.forwardRef((e,r)=>{let{label:a,error:s,helperText:i,type:l="text",size:o="base",className:c,...d}=e,u={default:"\n      border-[var(--color-neutral-300)] bg-white text-[var(--color-neutral-900)]\n      hover:border-[var(--color-neutral-400)]\n    ",error:"\n      border-[var(--color-error)] bg-white text-[var(--color-neutral-900)]\n      focus:ring-[var(--color-error)] focus:border-[var(--color-error)]\n    "},v=d.id||"input-".concat(Math.random().toString(36).substr(2,9));return(0,t.jsxs)("div",{className:"w-full",children:[a&&(0,t.jsx)("label",{htmlFor:v,className:"block text-[var(--font-size-sm)] font-medium text-[var(--color-neutral-700)] mb-[var(--spacing-2)]",children:a}),(0,t.jsx)("input",{ref:r,id:v,type:l,className:(0,n.Z)("\n    w-full border transition-all duration-[var(--duration-fast)]\n    focus:outline-none focus:ring-2 focus:ring-[var(--color-primary-500)] focus:border-[var(--color-primary-500)]\n    disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-[var(--color-neutral-100)]\n    placeholder:text-[var(--color-neutral-400)]\n  ",s?u.error:u.default,{sm:"px-[var(--spacing-3)] py-[var(--spacing-2)] text-[var(--font-size-sm)] rounded-[var(--radius-sm)]",base:"px-[var(--spacing-4)] py-[var(--spacing-3)] text-[var(--font-size-base)] rounded-[var(--radius-base)]",lg:"px-[var(--spacing-5)] py-[var(--spacing-4)] text-[var(--font-size-lg)] rounded-[var(--radius-md)]"}[o],c),"aria-invalid":s?"true":"false","aria-describedby":s?"".concat(v,"-error"):i?"".concat(v,"-helper"):void 0,...d}),s&&(0,t.jsx)("p",{id:"".concat(v,"-error"),className:"mt-[var(--spacing-2)] text-[var(--font-size-sm)] text-[var(--color-error)]",role:"alert",children:s}),i&&!s&&(0,t.jsx)("p",{id:"".concat(v,"-helper"),className:"mt-[var(--spacing-2)] text-[var(--font-size-sm)] text-[var(--color-neutral-500)]",children:i})]})});i.displayName="Input",r.Z=i},8706:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return h}});var t=a(5893),s=a(7294),n=a(1163),i=a(9008),l=a.n(i),o=a(8189),c=a(512),d=a(5658),u=a(9976),v=a(4562);a(2489);var m=e=>{let{threadId:r,recipientUser:a}=e,[n,i]=(0,s.useState)([]),[l,o]=(0,s.useState)(""),[m,h]=(0,s.useState)(!1),[x,f]=(0,s.useState)(!1),p=(0,s.useRef)(null),g=(0,s.useRef)(null),b=[{id:1,senderId:null==a?void 0:a.id,senderName:null==a?void 0:a.name,content:"Hey! I love your latest character design. Would you be interested in collaborating on a game project?",timestamp:new Date(Date.now()-3e5),status:"delivered"},{id:2,senderId:"current-user",senderName:"You",content:"Thanks! I'd love to hear more about it. What kind of game?",timestamp:new Date(Date.now()-24e4),status:"read"},{id:3,senderId:null==a?void 0:a.id,senderName:null==a?void 0:a.name,content:"It's an indie RPG about time travel. I need character concepts for the main protagonists.",timestamp:new Date(Date.now()-18e4),status:"delivered"}];(0,s.useEffect)(()=>{i(b)},[r]),(0,s.useEffect)(()=>{j()},[n]);let j=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},w=async e=>{if(e.preventDefault(),!l.trim())return;let r={id:Date.now(),senderId:"current-user",senderName:"You",content:l,timestamp:new Date,status:"sending"};i(e=>[...e,r]),o(""),h(!0);try{await new Promise(e=>setTimeout(e,500)),i(e=>e.map(e=>e.id===r.id?{...e,status:"delivered"}:e))}catch(e){i(e=>e.map(e=>e.id===r.id?{...e,status:"failed"}:e))}finally{h(!1)}},y=e=>new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}).format(e);return(0,t.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-[var(--spacing-4)] border-b border-[var(--color-neutral-200)]",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-[var(--spacing-3)]",children:[(0,t.jsx)(d.Z,{src:null==a?void 0:a.avatar,alt:null==a?void 0:a.name,size:"sm"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-[var(--font-size-lg)] font-semibold text-[var(--color-neutral-900)]",children:null==a?void 0:a.name}),(0,t.jsx)("p",{className:"text-[var(--font-size-sm)] text-[var(--color-neutral-500)]",children:(null==a?void 0:a.isOnline)?"Online":"Last seen 2m ago"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-[var(--spacing-2)]",children:[(0,t.jsx)(u.Z,{variant:"ghost",size:"sm","aria-label":"Voice call",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})})}),(0,t.jsx)(u.Z,{variant:"ghost",size:"sm","aria-label":"Video call",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-[var(--spacing-4)] space-y-[var(--spacing-4)]",children:[n.map(e=>(0,t.jsx)("div",{className:(0,c.Z)("flex","current-user"===e.senderId?"justify-end":"justify-start"),children:(0,t.jsxs)("div",{className:(0,c.Z)("max-w-xs lg:max-w-md px-[var(--spacing-4)] py-[var(--spacing-3)] rounded-[var(--radius-lg)]","current-user"===e.senderId?"bg-[var(--color-primary-600)] text-white rounded-br-[var(--radius-sm)]":"bg-[var(--color-neutral-100)] text-[var(--color-neutral-900)] rounded-bl-[var(--radius-sm)]"),children:[(0,t.jsx)("p",{className:"text-[var(--font-size-base)] leading-relaxed",children:e.content}),(0,t.jsxs)("div",{className:(0,c.Z)("flex items-center justify-between mt-[var(--spacing-2)] text-[var(--font-size-xs)]","current-user"===e.senderId?"text-white/70":"text-[var(--color-neutral-500)]"),children:[(0,t.jsx)("span",{children:y(e.timestamp)}),"current-user"===e.senderId&&(0,t.jsxs)("span",{className:"ml-[var(--spacing-2)]",children:["sending"===e.status&&"⏳","delivered"===e.status&&"✓","read"===e.status&&"✓✓","failed"===e.status&&"❌"]})]})]})},e.id)),x&&(0,t.jsx)("div",{className:"flex justify-start",children:(0,t.jsx)("div",{className:"bg-[var(--color-neutral-100)] px-[var(--spacing-4)] py-[var(--spacing-3)] rounded-[var(--radius-lg)] rounded-bl-[var(--radius-sm)]",children:(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-[var(--color-neutral-400)] rounded-full animate-bounce"}),(0,t.jsx)("div",{className:"w-2 h-2 bg-[var(--color-neutral-400)] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,t.jsx)("div",{className:"w-2 h-2 bg-[var(--color-neutral-400)] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,t.jsx)("div",{ref:p})]}),(0,t.jsx)("div",{className:"border-t border-[var(--color-neutral-200)] p-[var(--spacing-4)]",children:(0,t.jsxs)("form",{onSubmit:w,className:"flex items-end space-x-[var(--spacing-3)]",children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(v.Z,{ref:g,placeholder:"Type a message...",value:l,onChange:e=>o(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),w(e))}})}),(0,t.jsxs)("div",{className:"flex items-center space-x-[var(--spacing-2)]",children:[(0,t.jsx)(u.Z,{type:"button",variant:"ghost",size:"sm","aria-label":"Attach file",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})})}),(0,t.jsx)(u.Z,{type:"button",variant:"ghost",size:"sm","aria-label":"Add emoji",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsx)(u.Z,{type:"submit",variant:"primary",size:"sm",disabled:!l.trim(),loading:m,children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})]})})]})};function h(){let{threadId:e}=(0,n.useRouter)().query,{user:r}=(0,o.a)(),[a,i]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),u={id:2,name:"Alex Chen",username:"alexcreates",avatar:null,isOnline:!0};return((0,s.useEffect)(()=>{e&&setTimeout(()=>{i(u),d(!1)},500)},[e]),c)?(0,t.jsx)("div",{className:"min-h-screen bg-[var(--color-neutral-50)] flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--color-primary-600)]"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l(),{children:[(0,t.jsxs)("title",{children:[a?"Chat with ".concat(a.name):"Chat"," - Creator Community Platform"]}),(0,t.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,t.jsx)("div",{className:"h-screen flex flex-col",children:(0,t.jsx)(m,{threadId:e,recipientUser:a})})]})}},9008:function(e,r,a){e.exports=a(6665)},1163:function(e,r,a){e.exports=a(3035)},512:function(e,r,a){"use strict";r.Z=function(){for(var e,r,a=0,t="",s=arguments.length;a<s;a++)(e=arguments[a])&&(r=function e(r){var a,t,s="";if("string"==typeof r||"number"==typeof r)s+=r;else if("object"==typeof r){if(Array.isArray(r)){var n=r.length;for(a=0;a<n;a++)r[a]&&(t=e(r[a]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t)}return s}(e))&&(t&&(t+=" "),t+=r);return t}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9614)}),_N_E=e.O()}]);